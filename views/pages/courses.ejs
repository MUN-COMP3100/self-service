<!DOCTYPE html>
<html lang="en">
	<head>
		<%- include('../partials/head') %>
	</head>
	<body>
    <% 
      const optionsSet = new Set()
      courses.forEach(course => {
        optionsSet.add(course.subject)
      });
      const sortedOptions = [...optionsSet].sort()

       %>
		<div class="flex min-h-screen">
			<%- include('../partials/sidebar.ejs', { page_name: "courses" }) %>

			<main class="flex flex-col bg-slate-100 flex-1">
				<%- include('../partials/navbar.ejs') %>

				<div class="px-5 mt-5">
					<h1 class="text-xl">Courses</h1>
          <div class="flex gap-1">
            <i data-feather="filter" width="20px"></i>
            <select id="filter" class=" p-1 rounded-lg min-w-[200px]">
              <option value="all">All</option>
              <% sortedOptions.forEach(option => { %>
                
               <option><%= option %></option>
              <% }) %>
            </select>
          </div>

          <div class="mt-3">
            <div id="success" class="text-center border-[1px] border-green-600 text-green-800 p-2 rounded-xl hidden">
              Course Registered Successfully
            </div>
            <div id="fail" class="text-center border-[1px] border-red-600 text-red-800 p-2 rounded-xl hidden">
              Failed to Register Course
            </div>
          </div>
					<ul id="courses" class="flex flex-col gap-3 mt-3">
						<% courses.forEach(course => { %>

						<li
							class="h-20 bg-white p-3 rounded-xl flex justify-between"
              data-subject="<%= course.subject %>"
						>
							<div>
								<span class="flex gap-1">
									<i data-feather="book"></i>
									<%= course.subject %> | <%= course.number %>
								</span>
								<span class="text-sm text-gray-500 mt-4">
									<%= course.name %> |
								</span>
                <span class="text-sm text-gray-500 mt-4">
									<a class=" text-red-300" href="">View Schedule</a>
								</span>
							</div>
							<div class="flex flex-col items-end gap-1">
								<div class="flex gap-2">
									<i data-feather="users" width="20px"></i>
									<span></span>
								</div>
								<button
                  data-course="<%= course.id %>"
									class="bg-red-900 text-white p-1 text-sm rounded-lg registerBtn"
								>
									Register
								</button>
							</div>
						</li>
						<% }) %>
					</ul>
				</div>
			</main>
		</div>

		<%- include('../partials/scripts.ejs') %>
		<script src="/js/view_courses.js"></script>
    <script src="/js/registerCourse.js"></script>
	</body>
</html>
